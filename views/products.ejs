<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles/basic.css">
    <link rel="stylesheet" href="/styles/productsPage.css">
    <title>Document</title>
</head>

<body>
    <nav class="navigation">
        <div class="logo"><a href="/">Frutti</a></div>
        <div class="middle-nav">
            <input class="middle-input" type="text" placeholder="Search">
        </div>
        <div class="right-nav">
            <div class="products"><a href="/products">Products</a></div>
            <div class="categories"><a href="/categories">Categories</a></div>
        </div>

    </nav>
    <main>

        <div class="form-container">
            <form action="/products" method="POST" enctype="multipart/form-data" class="form-add">
                <label for="image">Select image:</label>
                <input type="file" name="image" id="image" accept="image/*" required>
                <label for="name">Product name:</label>
                <input type="text" id="name" name="name" required>
                <div class="select-container">
                    <label for="category">Category:</label>
                    <select id="category" name="category" required>
                        <% if(productsCategory.length> 0){
                            productsCategory.forEach(prod => {
                            %> <option value="<%= prod %>">
                                <%= prod %>
                            </option>
                            <% }) } %>
                    </select>
                </div>
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity">
                <label for="price">Price:</label>
                <input type="number" id="price" name="price" step="0.01" min="0" required>
                <button type="submit" class="submit">Submit</button>
            </form>
        </div>


        <!-- FILTERS, NAV WITH CATEGORIES-->
        <div class="filters">
            <form method="GET" action="/products">
                <button class="submit submit-apply" type="submit">Apply filters</button>
                <div class="price-filters">
                    <label class="sort-label">Sort by price:</label>
                    <div class="div-asc">
                        <label class="label-asc" for="asc">Ascending </label>
                        <input type="radio" id="asc" name="sort" value="asc"
                        <% if(typeof sort !== 'undefined' && sort === 'asc') { %> checked <% } %>>
                    </div>
                    <div class="div-desc">
                        <label class="label-desc" for="desc">Descending</label>
                        <input type="radio" id="desc" name="sort" value="desc" <% if(typeof sort !== 'undefined' && sort === 'desc') { %> checked <% } %>>
                    </div>
                </div>
                <% if(productsCategory.length> 0) { productsCategory.forEach(prod => {
                    %>
                    <div class="category-row">
                        <label for="<%=prod %>">
                            <%= prod %>
                        </label>
                        <input type="radio" id="<%=prod %>" name="category" value="<%=prod %>" <% if(typeof category !== 'undefined' && category === prod) { %> checked <% } %>>
                    </div>
                    <% }) } %>
                    <div class="category-row">
                        <label for="all">All</label>
                        <input type="radio" id="all" name="category" value="all" <% if(typeof category !== 'undefined' && category === 'all') { %> checked <% } %>>
                    </div>
            </form>
        </div>


        <div class="food-products-container">
            <% if(products && products.length> 0) { products.forEach(prod=> {
                if(prod.product_name) {
                %>
                <div class="single-food-product">
                    <img src="/<%=prod.image_url %>" alt="food image" class="product-image">
                    <div class="product-name">
                        <%= prod.product_name %>
                    </div>
                    <div class="product-category">
                        <%= prod.category_name %>
                    </div>
                    <div class="product-quantity">Quantity: <%= prod.quantity %>
                    </div>
                    <div class="product-price">Price: $<%= prod.price %>
                    </div>
                </div>
                <% }})} %>
                    <div class="single-food-product"><button class="add-product add-js">Add product +</button></div>
        </div>
    </main>

    <footer>&copy; 2025 hubfrt1337 | The Odin Project </footer>


    <script src="/product.js"></script>
</body>

</html>